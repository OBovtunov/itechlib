	 
pipeline {
          agent none
           options {
		timestamps ()
	    } 
	
	stages{
		     stage('Create docker'){
				agent{
				    dockerfile{  
					        filename './node/Dockerfile2'
	                        args '--name node -v exchange:/exchange  '
					  	
				    }
	            }
	           		 stages{
	                		stage('Build'){
						steps{
						                sh '''
								npm install
								npm run build
								npm run start 
						               # cp -r .next/* /exchange
						                '''
							    	}
	                		}
				    }
			}	    
	 
		   }
		}	
	}    
		   
